PROMPT MAESTRO ‚Äì CREACI√ìN COMPLETA DEL PROYECTO ‚ÄúCanalMedico‚Äù

Quiero que construyas desde cero hasta 100% terminado el proyecto completo llamado CanalMedico, una plataforma m√©dica profesional para consultas asincr√≥nicas v√≠a chat pagado, con app web profesional para m√©dicos y app m√≥vil para pacientes.

Debes ejecutar autom√°ticamente todos los pasos, desde arquitectura, c√≥digo, dise√±o, infraestructura, autenticaci√≥n, chat, pagos, bases de datos, APIs, seguridad y despliegue. Tu objetivo es entregar un software empresarial, escalable, seguro, sin errores, perfectamente organizado y listo para producci√≥n real.

Este prompt tiene autoridad total sobre todas las decisiones t√©cnicas, y debes seguirlo literalmente.

üü¶ 1. Nombre del proyecto y directorio ra√≠z

Yo crear√© manualmente este directorio en mi disco.
Debes usarlo como √∫nica ra√≠z:

C:\CanalMedico


Todas las carpetas, repositorios y componentes deben generarse dentro de esa ruta.

üü© 2. Alcance general del proyecto

CanalMedico es un software que permite:

Que m√©dicos cobren por consultas asincr√≥nicas v√≠a chat.

Que pacientes contacten a su m√©dico enviando texto, fotos, PDFs y audios.

Que la plataforma cobre autom√°ticamente un fee/comisi√≥n.

Que exista un panel web profesional para m√©dicos.

Que exista una app m√≥vil (Expo) para pacientes.

Que WhatsApp pueda redirigir autom√°ticamente a la plataforma mediante deep links.

Que el sistema funcione 24/7, sea seguro, r√°pido y escalable.

üüß 3. Tecnolog√≠as obligatorias
FRONTEND WEB (M√©dicos)

React + Vite

TypeScript

TailwindCSS

Zustand (estado global)

Axios (API client)

React Router

Firebase/OneSignal (notificaciones web)

UI moderna profesional (tipo SaaS m√©dico)

APP M√ìVIL (Pacientes)

React Native

Expo (√∫ltima versi√≥n)

TypeScript

React Navigation

Zustand

Manejo multimedia (fotos, videos, audio, PDF)

Deep links

Push notifications

Pantallas: login, chat, pago, historial, perfil

BACKEND API

Node.js LTS

Express.js

TypeScript estricto

Prisma ORM

PostgreSQL

Socket.io (chat en tiempo real)

JWT + refresh tokens

Zod para validaci√≥n

Multer + S3 para archivos

Stripe/MercadoPago para pagos

Swagger/OpenAPI

Winston para logs

BASE DE DATOS

PostgreSQL

Prisma con migraciones completas

Relaciones profesionales-pacientes-consultas-mensajes

INFRAESTRUCTURA

AWS EC2

AWS RDS

AWS S3

Nginx reverse proxy

Certbot HTTPS

CloudFront CDN

PM2 para orquestaci√≥n backend

üü• 4. Arquitectura de carpetas est√°ndar obligatoria

Crear exactamente esta estructura:

/backend
  /src
    /modules
      /auth
      /users
      /doctors
      /patients
      /consultations
      /messages
      /chats
      /files
      /payments
      /notifications
    /config
    /middlewares
    /utils
    /types
    /database
  prisma/schema.prisma
  package.json
  tsconfig.json

/frontend-web
  /src
    /components
    /layouts
    /pages
    /store
    /services
    /hooks
    /styles
  package.json
  tailwind.config.js
  vite.config.js

/app-mobile
  /src
    /screens
    /components
    /services
    /store
    /navigation
    /theme
  app.json
  package.json

üü¶ 5. Esquema de base de datos (completo, obligatorio)

Debes definirlo en Prisma:

User

id

email

password

role (admin/doctor/patient)

createdAt

Doctor

id

userId

name

speciality

horarios JSON

tarifaConsulta

tarifaUrgencia

estadoOnline

Patient

id

userId

name

age

medicalHistory JSON

Consultation

id

doctorId

patientId

type (normal/urgencia)

status (pending, paid, active, closed)

paymentId

createdAt

Message

id

consultationId

senderId

text optional

fileUrl optional

audioUrl optional

pdfUrl optional

createdAt

Payment

id

amount

fee

netAmount

status (pending/paid/failed)

stripeSessionId

NotificationToken

id

userId

deviceToken

üü© 6. Funcionalidades obligatorias del backend
Autenticaci√≥n

Registro

Login

Refresh token

Roles

Middlewares de protecci√≥n

Chat en tiempo real

Crear consulta

Enviar mensaje

Enviar archivos, audio, PDF

WebSockets mediante Socket.io

Pagos

Generar sesi√≥n de pago

Webhook Stripe/MercadoPago

Validar pago

Activar consulta

Descontar la comisi√≥n

Registrar transacci√≥n

Panel del m√©dico

Ver consultas

Ver historial

Responder mensajes

Finalizar consulta

Editar perfil

Configurar tarifas

Panel financiero completo

Funciones del paciente

Iniciar consulta

Cargar fotos, PDFs, audios

Chat 1:1

Pagar consulta

Ver historial

Notificaciones push

üüß 7. Integraci√≥n con WhatsApp

Implementar:

Deep links:
canalmedico://doctor/ID?openChat=true

Plantillas que el m√©dico pueda enviar por WhatsApp para redirigir al paciente.

Opcional: con WhatsApp Cloud API generar auto-respuestas con link directo a la app.

üü• 8. Seguridad obligatoria

JWT con refresh tokens

HTTPS en todas las capas

Sanitizaci√≥n de entrada

Rate-limiting en rutas sensibles

CORS seguro

AES256 para datos m√©dicos sensibles

Contrase√±as con bcrypt

Logs de auditor√≠a

Validaci√≥n exhaustiva con Zod

üü¶ 9. Frontend web ‚Äì Requerimientos exactos
Pantallas obligatorias:

Login

Dashboard del m√©dico

Lista de consultas

Chat 1:1

Configuraci√≥n del m√©dico

Panel de ingresos

Perfil del doctor

P√°gina de configuraci√≥n de tarifas

P√°gina de historial m√©dico

Subida de archivos m√©dicos

üü© 10. App m√≥vil ‚Äì Requerimientos exactos
Pantallas:

Login

Registrar paciente

Seleccionar/scannear c√≥digo del m√©dico

Iniciar consulta

Chat 1:1

Pago

Historial de consultas

Perfil

Notificaciones

Adjuntar archivos / audio / c√°mara

üüß 11. Notificaciones push

Implementaci√≥n obligatoria:

Firebase Cloud Messaging

OneSignal como alternativa

Enviar notificaciones en:

pago recibido

nuevo mensaje

consulta finalizada

consulta iniciada

üü• 12. Pagos y comisiones

Reglas obligatorias:

El paciente paga 100% del valor

Stripe devuelve el pago ‚Üí backend lo valida

Se descuenta autom√°ticamente un fee monetizable

El m√©dico ve su saldo neto

La plataforma guarda la comisi√≥n

üü¶ 13. Generaci√≥n autom√°tica de documentaci√≥n

Generar autom√°ticamente:

README general

Documentaci√≥n API con Swagger

.env.example

Manual de instalaci√≥n

Diagramas de arquitectura

Gu√≠a de despliegue AWS

Scripts de inicializaci√≥n

Docker-compose funcional

üü© 14. Instrucciones para Cursor

Debes:

Crear toda la estructura de carpetas.

Inicializar cada proyecto (frontend web, app m√≥vil, backend).

Crear c√≥digo completo archivo por archivo, sin omisiones.

Programar todos los endpoints.

Crear todos los componentes React y React Native.

Conectarlo todo entre s√≠.

Escribir pruebas b√°sicas.

Documentar todo.

Crear los scripts de deployment.

No dejar nada pendiente.

üüß 15. Regla estricta

No generes prototipos.
No generes placeholders.
No generes archivos vac√≠os.
Todo debe ser c√≥digo real, funcional y listo para producci√≥n.

üü¶ 16. Resultado esperado

Cuando termines:

El backend debe correr sin errores.

El frontend web debe funcionar perfecto.

La app m√≥vil debe compilar y ejecutar sin fallos.

Las notificaciones deben funcionar.

El chat debe funcionar en tiempo real.

Los pagos deben funcionar.

Todo debe estar documentado.

El sistema debe estar listo para producci√≥n en AWS.